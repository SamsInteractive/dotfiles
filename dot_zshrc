# --- Path / Basics ---
export ZSH="$HOME/.oh-my-zsh"
export EDITOR="nano"
export PAGER="less -R"
export PATH="$HOME/.local/bin:$PATH"



# ----- Oh My Zsh -----

# --- Theme ---
ZSH_THEME=""



# --- Plugins ---
plugins=(
  git
)

source "$ZSH/oh-my-zsh.sh"
unset LS_COLORS




# ----- User Plugins -----

# --- Starship ---
eval "$(starship init zsh)"



# --- FZF ---
source /usr/share/fzf/key-bindings.zsh
source /usr/share/fzf/completion.zsh



# --- zsh-completions ---
zstyle ':completion:*' matcher-list 'm:{a-z}={A-Za-z}'

zstyle ':completion:*' menu select

zstyle ':completion:*:descriptions' format '%F{yellow}%d%f'
zstyle ':completion:*:messages' format '%F{purple}%d%f'
zstyle ':completion:*:warnings' format '%F{red}%d%f'

zstyle ':completion::complete:*' use-cache on
zstyle ':completion::complete:*' cache-path ~/.zcompcache



# --- Suggestions & syntax highlighting ---
source /usr/share/zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh

source ~/.zsh/catppuccin_mocha-zsh-syntax-highlighting.zsh

source /usr/share/zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh



# --- Zoxide setup ---
eval "$(zoxide init zsh)"




# ----- Terminal Configs -----

# --- History config ---
HISTFILE=~/.histfile
HISTSIZE=10000
SAVEHIST=10000
setopt SHARE_HISTORY
setopt HIST_IGNORE_ALL_DUPS
setopt HIST_IGNORE_SPACE
setopt HIST_VERIFY
setopt EXTENDED_HISTORY



# --- Binding Configs ---
bindkey -e
bindkey '^H' backward-kill-word




# ----- Functions & Aliasing -----

# --- LS ---
alias ls='eza --group-directories-first --icons=always'
alias lsa='eza -la --group-directories-first --icons=always'

alias ll='eza -l --group-directories-first --icons=always'


llt() {
	if [[ $1 == "r" ]] then
		eza -lT --group-directories-first --icons=always
	else
		eza -lT --group-directories-first --icons=always --level="${1:-3}"
	fi
}



# --- BAT ---
cat() {
	if [[ $1 == "p" ]]; then
		bat --paging=never "$2"
	else
		bat "$1"
	fi
}



# --- Zoxide ---
alias cd='z'
alias ..='z ..'



# --- Clear ---
# Run Fastfetch after clear unless "clear f"
clear() {
        if [[ $1 == "f" ]]; then
                command clear
        else
                command clear
                run_fastfetch
        fi
}




# ----- Helper Functions -----

# --- Fastfetch ---
# Start fastfetch or minimal fastfetch when running in Jedi Terminal
run_fastfetch() {
        if [[ "$TERMINAL_EMULATOR" == "JetBrains-JediTerm" ]]; then
                fastfetch -c ~/.config/fastfetch/pycharm.jsonc
        else
		# Changes fastfetch preset based on terminal size
                if [ $(tput cols) -ge 106 ] && [ $(tput lines) -ge 22 ]; then
			fastfetch
		else
			fastfetch -c ~/.config/fastfetch/small.jsonc
		fi
        fi
}




# ----- Runtime Function Calls -----

# --- Run Fastfetch ---
run_fastfetch
